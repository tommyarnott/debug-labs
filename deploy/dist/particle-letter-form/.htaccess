<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews -Indexes
    </IfModule>

    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.debug\.io [NC]
    RewriteRule ^(.*)$ https://debug.io/$1 [L,R=301]

    # Handle Authorization Header
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # Handle X-XSRF-Token Header
    RewriteCond %{HTTP:x-xsrf-token} .
    RewriteRule .* - [E=HTTP_X_XSRF_TOKEN:%{HTTP:X-XSRF-Token}]

    # Redirect Trailing Slashes If Not A Folder...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=307]

    # Handle Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
    
</IfModule>

<FilesMatch "\.(html?|txt|css|js|php|pl)$">
SetOutputFilter DEFLATE
</FilesMatch>

<FilesMatch "\.(jpg|jpeg|png|gif|json|mp4)$">
Header set Cache-Control "max-age=604800, public"
</FilesMatch>


<FilesMatch "\.(jpg|jpeg|png|gif|json|mp4|otf|js|css)$">
Header set Cache-Control "max-age=31536000, public"
</FilesMatch>


<IfModule mod_headers.c>
    Header set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-eval'  https://player.vimeo.com https://pixijs.download https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://scripts.simpleanalyticscdn.com https://queue.simpleanalyticscdn.com https://*.simpleanalyticscdn.com  'unsafe-inline';     style-src 'self' 'unsafe-inline'; worker-src blob:; img-src 'self' https://queue.simpleanalyticscdn.com data:; connect-src 'self' https://queue.simpleanalyticscdn.com data:; "


    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Headers "*"
    Header set Access-Control-Allow-Methods "*"
    # Header always set Content-Security-Policy "upgrade-insecure-requests;"
    Header set Strict-Transport-Security "max-age=31536000;includeSubDomains;"
    Header always set X-Frame-Options SAMEORIGIN
    Header set X-XSS-Protection "1"
    Header set X-Content-Type-Options nosniff
    Header set Referrer-Policy: no-referrer
    Header unset "X-Powered-By"
    Header unset "Server"
    Header set Permissions-Policy: "geolocation=(), microphone=(), camera=()"

</IfModule>

<IfModule mod_expires.c>  
  # Turn on the module.
  ExpiresActive on
  # Set the default expiry times.
  ExpiresDefault "access plus 2 days"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/svg+xml "access 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType application/x-shockwave-flash "access plus 1 month"
  ExpiresByType image/ico "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 month"
  ExpiresByType text/html "access plus 600 seconds"
</IfModule>  
# END Expire headers  


#Cache buster: 
#<filesMatch "\.(html|htm|js|css|json|png|jpg)$">
#  FileETag None
#  <ifModule mod_headers.c>
#     Header unset ETag
#     Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
#     Header set Pragma "no-cache"
#     Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
#  </ifModule>
#</filesMatch>


ServerSignature Off

